# インターンで作るガイスターについて

## ガイスターとは

ガイスター (Geister) 、またはファンタスミ (Fantasmi) は、幽霊を元にしたコマを使った、ドイツの2人用ボードゲーム。コマの背中についた印をお互いにわからないように配置し互いに取り合うという、単純ながら心理的要素の強い対戦ゲームである。

* [ガイスター - Wikipedia](https://ja.wikipedia.org/wiki/%E3%82%AC%E3%82%A4%E3%82%B9%E3%82%BF%E3%83%BC)

### ルール

* プレイ人数 2人

### 必要なもの

* 青いお化けコマ（8個　内4つずつ）
* 赤いお化けコマ（8個　内4つずつ）
* 6×6マスの盤面ボード

### 準備
* 自分のお化けコマ（赤4つ、青4つ）をゲーム開始時にボードの自陣に自分のお化けコマを全て配置する。
  * 置ける場所は固定だが、どこにどのお化けを置くかは自分で決めて良い
* 何色を置いてるかを相手に見えないようにする。
* どちらもコマが配置できたらゲームを開始する

### 勝利条件（3つの内1つでも条件を達成したプレイヤーの勝利）
1. 相手の「良いオバケ」を全部取る。
2. 自分の「悪いオバケ」が全部相手に取られる
3. 自分の「良いオバケ」のひとつを相手側脱出口から外に出す。

### 対戦
* 順番を決める
* 1ターンに1体だけどのお化けでも1マスだけ進めることが出来る
  * 上下左右1マス
* 進められない場所
  * 自分の駒が進む先にいる・盤面の外が進む先である
* 動かした先に敵のコマがある場合はそのコマを取る
  * ただし相手から取ったコマを使うことはできない
* 1コマ動かしたらターンを交代してこれを勝負が決まるまで繰り返す

### 勝利条件についての補足（特に3つ目）
* 相手の側の脱出出口に辿り着いて次のターンに盤面の外に出せる
* 出口を塞ぐことは可能

## 今回のインターンで実装するところ

### タイトル画面
* ユーザ作成が出来る
  * 半角英数字 4文字～16文字
* パスワード入力
  * 半角英数字 8文字～16文字
* 作成したユーザ・登録されているユーザでログインが出来る
* (クライアント側)ログインに成功したらタイトル➝ルーム選択への遷移が出来る

### ルーム選択画面
* ルーム一覧が表示できる
* ルームを作成できる
* ルームに対戦者として入場できる
* ログアウト出来る
  * ログアウト処理がきちんとできないと次回同じユーザでログインできなくなるので早めに実装しといたほうが良い

#### ＋α
* ルームに観戦者として入場できる
* (クライアント側)フィルター機能（対戦待ち、対戦中など）
  * その時に部屋情報を更新してもよい

### 対戦画面への遷移
* ルームを作成した場合は対戦待ち状態にする
* 退出して誰もいなくなった場合は部屋がなくなる
* ルームに入場してきた場合は準備出来る状態にする
  * 自動でもいい

### (主にクライアント側)対戦準備
* 赤いコマ、青いコマが4つずつ自分の手元に表示される
  * 先に配置されていて位置を入れ替えて準備する形でもOK
* 自分の好きなコマを決められた場所に好きなように置くことが出来る
* 全てのコマを置くと対戦準備完了が出来る
  * ボタンで準備完了にしても良いし、自動的でも良い
  * キャンセル出来るようにしてもOK
* プレイヤーが2人とも対戦準備完了になったら両プレイヤーの配置されたコマが表示される


### 対戦開始～対戦中
* ターンが割り振られる
  * これはサーバー側で実装
* コマの移動、コマを取る処理等をガイスター通りに実装する
* 相手のターンと自分のターンが切り替えられる
* 勝利条件にどちらかが達したら対戦終了させる
* 切断された時の対応
  * ゲームを強制終了した時

#### ＋α(クライアント側)
* 取るときや移動時にアニメーションさせる
* 移動できる範囲が表示される
* エラー画面の表示とか
* 降参が出来る
* 演出の追加
  * ガイスターというゲームは単純ながら心理的要素の強いゲームなのでそれにそった演出

### 観戦
* 観戦はすべてが＋αで満たされるべき要素（実装されなくて良い）

#### ＋α
* 途中経過の情報を取得して配置される
* 退出が出来る（ルーム選択へ遷移）

### 対戦終了
* 基本的には両プレイヤーともルーム選択画面に戻す
  * 出来そうであれば、再戦機能・勝った方だけ残して対戦待受状態にするでもOK

#### ＋α
* 観戦者も勝ったプレイヤーを表示してルーム選択画面に戻す

### その他
* 使う画像を変えてもよい
* 音の実装
  * 権利フリーなもので
  * ガイスターの雰囲気に合うものならGood

## フローチャート

* [Flowchart](フローチャート.md)